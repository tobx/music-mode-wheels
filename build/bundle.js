var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function a(e,t,n){e.$$.on_destroy.push(s(t,n))}function l(e){return null==e?"":e}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function h(e){return document.createTextNode(e)}function g(){return h(" ")}function b(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function y(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function w(e,t,n){e.classList[n?"add":"remove"](t)}let x;function k(e){x=e}function C(){if(!x)throw new Error("Function called outside component initialization");return x}function P(){const e=C();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach((t=>{t.call(e,o)}))}}}const j=[],O=[],_=[],M=[],A=Promise.resolve();let E=!1;function D(e){_.push(e)}function L(e){M.push(e)}let S=!1;const B=new Set;function N(){if(!S){S=!0;do{for(let e=0;e<j.length;e+=1){const t=j[e];k(t),I(t.$$)}for(k(null),j.length=0;O.length;)O.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];B.has(t)||(B.add(t),t())}_.length=0}while(j.length);for(;M.length;)M.pop()();E=!1,S=!1,B.clear()}}function I(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(D)}}const z=new Set;let G;function T(e,t){e&&e.i&&(z.delete(e),e.i(t))}function R(e,t,n,r){if(e&&e.o){if(z.has(e))return;z.add(e),G.c.push((()=>{z.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function F(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function H(e){e&&e.c()}function W(e,n,i,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(n,i),s||D((()=>{const n=l.map(t).filter(o);c?c.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(D)}function U(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(j.push(e),E||(E=!0,A.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function q(t,o,i,s,a,l,c=[-1]){const u=x;k(t);const f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let m=!1;if(f.ctx=i?i(t,o.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),m&&Z(t,e)),n})):[],f.update(),m=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);f.fragment&&f.fragment.l(e),e.forEach(d)}else f.fragment&&f.fragment.c();o.intro&&T(t.$$.fragment),W(t,o.target,o.anchor,o.customElement),N()}k(u)}class V{$destroy(){U(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var J;const K=null!==(J=window.AudioContext)&&void 0!==J?J:window.webkitAudioContext;function Q(){if(void 0===K)throw new Error("AudioContext is not supported.");return new K}class X{constructor(){Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:Q()})}async decode(e){return new Promise(((t,n)=>{this.context.decodeAudioData(e,t,n)}))}}async function Y(e){await new Promise((t=>e.addEventListener("ended",t)))}class ee{constructor(){Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:Q()}),Object.defineProperty(this,"gainNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sources",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),this.gainNode=this.createGain()}get currentTime(){return this.context.currentTime}createGain(){const e=this.context.createGain();return e.connect(this.context.destination),e}async stop(e=.04,t=-96,n=.01){const r=this.context.currentTime+n,o=r+e,i=20*e/(t*-Math.log(10));this.gainNode.gain.setTargetAtTime(0,r,i),this.gainNode=this.createGain();const s=[...this.sources].map((async e=>{e.stop(o),await Y(e)}));await Promise.all(s)}async play(e,t,n,r){const o=this.context.createBufferSource();o.buffer=e,o.connect(this.gainNode),this.sources.add(o),o.start(t,n,r),await Y(o),this.sources.delete(o),o.disconnect()}}function te(e,t){return"/"===e.slice(-1)?e+t:e+"/"+t}const ne=[];function re(t,n=e){let r;const o=[];function s(e){if(i(t,e)&&(t=e,r)){const e=!ne.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),ne.push(n,t)}if(e){for(let e=0;e<ne.length;e+=2)ne[e][0](ne[e+1]);ne.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(i,a=e){const l=[i,a];return o.push(l),1===o.length&&(r=n(s)||e),i(t),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}const oe={instruments:{libraryUrl:"instruments",defaultPreset:{id:"piano",tempo:120},index:{piano:{name:"Piano",presets:[{tempo:60,path:"piano/500ms"},{tempo:120,path:"piano/250ms"}]},vibraphone:{name:"Vibraphone",presets:[{tempo:60,path:"vibraphone/500ms"},{tempo:120,path:"vibraphone/250ms"}]}}}},ie=new class{constructor(e,t){Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"decoder",{enumerable:!0,configurable:!0,writable:!0,value:new X})}getUrl({id:e,tempo:t}){var n;const r=null===(n=this.index[e])||void 0===n?void 0:n.presets.find((({tempo:e})=>e===t));if(void 0===r){throw new Error(`Cannot find tempo '${t}' for instrument id '${e}'.`)}return te(this.url,r.path)}get instruments(){return Object.keys(this.index).map((e=>this.getInstrument(e)))}hasPreset({id:e,tempo:t}){var n;return null===(n=this.getInstrument(e))||void 0===n?void 0:n.tempi.includes(t)}getInstrument(e){if(this.index.hasOwnProperty(e)){const{name:t,presets:n}=this.index[e];return{id:e,name:t,tempi:n.map((e=>e.tempo))}}}async loadSamples(e){const t=this.getUrl(e),[n,r]=await Promise.all([this.loadSampleIndex(t),this.loadSampleFile(t)]);let o=0;const i=n.map((async({note:e,bytes:t})=>{const n=o+t,i=r.slice(o,n);return o=n,{note:e,buffer:await this.decoder.decode(i)}}));return Promise.all(i)}async loadSampleIndex(e){return(await fetch(te(e,"index.json"))).json()}async loadSampleFile(e){return(await fetch(te(e,"samples.bin"))).arrayBuffer()}}(oe.instruments.libraryUrl,oe.instruments.index),se=new class{constructor(e,t=.01){Object.defineProperty(this,"library",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"latency",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"player",{enumerable:!0,configurable:!0,writable:!0,value:new ee}),Object.defineProperty(this,"buffers",{enumerable:!0,configurable:!0,writable:!0,value:{}})}async load(e){await this.unload();const t=await this.library.loadSamples(e);for(const{note:e,buffer:n}of t)this.buffers[e]=n}async playNote(e,t,n,r){const o=this.buffers[e];void 0!==o&&await this.player.play(o,t,n,r)}async playPattern(e){let t=this.player.currentTime+this.latency;const n=e.map((async({note:e,delay:n})=>{t+=n,await this.playNote(e,t)}));await Promise.all(n)}async stop(){await this.player.stop()}async unload(){this.buffers={},await this.stop()}}(ie),ae=re("initial"),{set:le,update:ce}=ae,ue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(ae,["set","update"]),de=re(oe.instruments.defaultPreset.id),fe=re(oe.instruments.defaultPreset.tempo);(function(t,n,i){const a=!Array.isArray(t),l=a?[t]:t,c=n.length<2;return{subscribe:re(i,(t=>{let i=!1;const u=[];let d=0,f=e;const m=()=>{if(d)return;f();const r=n(a?u[0]:u,t);c?t(r):f=o(r)?r:e},p=l.map(((e,t)=>s(e,(e=>{u[t]=e,d&=~(1<<t),i&&m()}),(()=>{d|=1<<t}))));return i=!0,m(),function(){r(p),f()}})).subscribe}})([de,fe],(([e,t])=>({id:e,tempo:t}))).subscribe((async e=>{if(ie.hasPreset(e))le("loading"),await se.load(e),le("loaded");else{const t=ie.getInstrument(e.id);if(void 0===t)throw new Error("Cannot find instrument with id: "+e.id);fe.set(t.tempi[0])}}));const me=async e=>{await se.playPattern(e)},pe=async()=>{await se.stop()},he=Math.PI/180;function ge(e){return[`M 0 ${e}`,`a ${e} ${e} 0 0 1 0 ${-2*e}`,`a ${e} ${e} 0 0 1 0 ${2*e}`].join(" ")}function be(e,t,n){const r=n*he,o=Math.cos(r),i=Math.sin(r);return[`M ${e} 0`,`A ${e} ${e} 0 0 1 ${o*e} ${i*e}`,`L ${o*t} ${i*t}`,`A ${t} ${t} 0 0 0 ${t} 0`,"Z"].join(" ")}function $e(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function ve(e){let t,n,r,o,i,s,a,l,f,m,x,k,C,P,j=`${e[13]+1}. `,O=e[11].name+"";function _(){return e[8](e[11],e[13])}return{c(){t=p("g"),n=p("path"),r=p("text"),o=p("textPath"),i=p("tspan"),s=h(j),a=g(),l=p("tspan"),f=h(O),m=g(),x=p("circle"),$(n,"d",e[11].path),$(n,"transform","rotate(-90)"),$(n,"class","svelte-12ricdg"),$(i,"alignment-baseline","middle"),y(i,"font-size",we+"px"),$(l,"alignment-baseline","middle"),y(l,"font-size",e[11].fontSize+"px"),$(o,"startOffset","50%"),v(o,"xlink:href","#mode-text-circle"),$(r,"text-anchor","middle"),$(r,"dominant-baseline","middle"),$(r,"transform","rotate(15)"),$(r,"class","svelte-12ricdg"),$(x,"cy",k=-e[0]),$(x,"r","5"),$(x,"transform","rotate(15)"),$(x,"class","svelte-12ricdg"),$(t,"class","mode svelte-12ricdg"),$(t,"transform","rotate("+e[11].rotation+")"),w(t,"selected",e[11]===e[1])},m(e,d){u(e,t,d),c(t,n),c(t,r),c(r,o),c(o,i),c(i,s),c(o,a),c(o,l),c(l,f),c(o,m),c(t,x),C||(P=b(t,"click",_),C=!0)},p(n,r){e=n,1&r&&k!==(k=-e[0])&&$(x,"cy",k),18&r&&w(t,"selected",e[11]===e[1])},d(e){e&&d(t),C=!1,P()}}}function ye(t){let n,r,o,i,s,a=t[4],l=[];for(let e=0;e<a.length;e+=1)l[e]=ve($e(t,a,e));return{c(){n=p("defs"),r=p("path"),o=g(),i=p("g"),s=p("circle");for(let e=0;e<l.length;e+=1)l[e].c();$(r,"id","mode-text-circle"),$(r,"d",ge(t[3])),$(s,"r",t[0]),$(s,"class","svelte-12ricdg"),$(i,"class","wheel svelte-12ricdg"),y(i,"transform","rotate("+t[2]+"deg)")},m(e,t){u(e,n,t),c(n,r),u(e,o,t),u(e,i,t),c(i,s);for(let e=0;e<l.length;e+=1)l[e].m(i,null)},p(e,[t]){if(1&t&&$(s,"r",e[0]),51&t){let n;for(a=e[4],n=0;n<a.length;n+=1){const r=$e(e,a,n);l[n]?l[n].p(r,t):(l[n]=ve(r),l[n].c(),l[n].m(i,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}4&t&&y(i,"transform","rotate("+e[2]+"deg)")},i:e,o:e,d(e){e&&d(n),e&&d(o),e&&d(i),f(l,e)}}}const we=8;function xe(e,t,n){let{outerRadius:r}=t,{innerRadius:o}=t,{modeDefs:i}=t;const s=P(),a=(r+o)/2;class l{constructor(e){Object.defineProperty(this,"def",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"path",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.path=be(r,o,30)}get angle(){return-this.rotation}get fontSize(){return Math.min(we,88/this.name.length)}get name(){return this.def.name}get rotation(){return 30*this.def.semitones}}const c=i.map((e=>new l(e)));function u(e,t){n(1,d=e),s("modeChanged",t)}let d=c[0],f=0;return e.$$set=e=>{"outerRadius"in e&&n(6,r=e.outerRadius),"innerRadius"in e&&n(0,o=e.innerRadius),"modeDefs"in e&&n(7,i=e.modeDefs)},e.$$.update=()=>{if(6&e.$$.dirty){const e=d.angle-f;n(2,f+=(e%360+540)%360-180)}},[o,d,f,a,c,u,r,i,(e,t)=>u(e,t)]}class ke extends V{constructor(e){super(),q(this,e,xe,ye,i,{outerRadius:6,innerRadius:0,modeDefs:7})}}function Ce(e,t,n){const r=e.slice();return r[13]=t[n],r}function Pe(e){let t,n,r,o,i,s,a,l=e[13].displayName+"";function f(){return e[7](e[13])}return{c(){t=p("g"),n=p("path"),r=p("text"),o=p("textPath"),i=h(l),$(n,"d",e[13].path),$(n,"transform","rotate(-90)"),$(n,"class","svelte-zs6wzo"),$(o,"startOffset","50%"),$(o,"text-anchor","middle"),$(o,"alignment-baseline","middle"),v(o,"xlink:href","#key-text-circle"),$(r,"dominant-baseline","middle"),$(r,"transform","rotate("+e[13].textAngle+")"),$(r,"class","svelte-zs6wzo"),$(t,"class","key "+e[13].type+" svelte-zs6wzo"),$(t,"transform","rotate("+e[13].rotation+")"),w(t,"selected",e[13]===e[0])},m(e,l){u(e,t,l),c(t,n),c(t,r),c(r,o),c(o,i),s||(a=b(t,"click",f),s=!0)},p(n,r){e=n,49&r&&w(t,"selected",e[13]===e[0])},d(e){e&&d(t),s=!1,a()}}}function je(t){let n,r,o,i,s=t[5].concat(t[4]),a=[];for(let e=0;e<s.length;e+=1)a[e]=Pe(Ce(t,s,e));return{c(){n=p("defs"),r=p("path"),o=g(),i=p("g");for(let e=0;e<a.length;e+=1)a[e].c();$(r,"id","key-text-circle"),$(r,"d",ge(t[2])),$(i,"class","wheel"),y(i,"transform","rotate("+t[1]+"deg)")},m(e,t){u(e,n,t),c(n,r),u(e,o,t),u(e,i,t);for(let e=0;e<a.length;e+=1)a[e].m(i,null)},p(e,[t]){if(57&t){let n;for(s=e[5].concat(e[4]),n=0;n<s.length;n+=1){const r=Ce(e,s,n);a[n]?a[n].p(r,t):(a[n]=Pe(r),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}2&t&&y(i,"transform","rotate("+e[1]+"deg)")},i:e,o:e,d(e){e&&d(n),e&&d(o),e&&d(i),f(a,e)}}}function Oe(e,t,n){let{radius:r}=t;const o=P(),i=2/3*r,s=r/2,a=(r+i)/2-1;class l{constructor(e,t,n,o,a=30,l=15){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"displayName",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"rotation",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"keyAngle",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"textAngle",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"path",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const c=this.isWhite?s:i;this.path=be(r,c,a)}get angle(){return 15-this.rotation-this.textAngle}get isWhite(){return"white"===this.type}}function c(e){n(0,m=e),o("keyChanged",e.name)}const u=[new l("white","C","C",0,45,15),new l("black","Db","C♯ / D♭",30),new l("white","D","D",45,60,30),new l("black","Eb","D♯ / E♭",90),new l("white","E","E",105,45,30),new l("white","F","F",150,45,15),new l("black","Gb","F♯ / G♭",180),new l("white","G","G",195,60,30),new l("black","Ab","G♯ / A♭",240),new l("white","A","A",255,60,30),new l("black","Bb","A♯ / B♭",300),new l("white","B","B",315,45,30)],d=u.filter((e=>!e.isWhite)),f=u.filter((e=>e.isWhite));let m=u[0],p=0;return e.$$set=e=>{"radius"in e&&n(6,r=e.radius)},e.$$.update=()=>{if(3&e.$$.dirty){const e=m.angle-p;n(1,p+=(e%360+540)%360-180)}},[m,p,a,c,d,f,r,e=>c(e)]}class _e extends V{constructor(e){super(),q(this,e,Oe,je,i,{radius:6})}}function Me(t){let n,r,o,i,s,a;return{c(){n=p("g"),r=p("circle"),o=p("path"),$(r,"cx","0"),$(r,"cy","0"),$(r,"r",t[0]),$(r,"fill","white"),$(r,"stroke","black"),$(r,"class","svelte-6t0bxr"),$(o,"d",t[2]),$(o,"class","svelte-6t0bxr"),$(n,"class",i=l(t[1])+" svelte-6t0bxr")},m(e,i){u(e,n,i),c(n,r),c(n,o),s||(a=b(n,"click",t[3]),s=!0)},p(e,[t]){1&t&&$(r,"r",e[0]),4&t&&$(o,"d",e[2]),2&t&&i!==(i=l(e[1])+" svelte-6t0bxr")&&$(n,"class",i)},i:e,o:e,d(e){e&&d(n),s=!1,a()}}}function Ae(e){const t=2*Math.PI/3,n=Math.cos(t)*e,r=Math.sin(t)*e;return`M ${n} ${r} L ${e} 0 L ${n} ${-r} Z`}function Ee(e){const t=Math.sin(Math.PI/4)*e;return`M -${t} ${t} L ${t} ${t} L ${t} ${-t} L ${-t} ${-t} Z`}function De(e,t,n){let r,{radius:o}=t,{state:i}=t;const s=o/2;function a(e){return be(2*e,1.75*e,180)}return e.$$set=e=>{"radius"in e&&n(0,o=e.radius),"state"in e&&n(1,i=e.state)},e.$$.update=()=>{2&e.$$.dirty&&n(2,r=("loading"===i?a:"playing"===i?Ee:Ae)(s))},[o,i,r,function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}(e,t)}]}class Le extends V{constructor(e){super(),q(this,e,De,Me,i,{radius:0,state:1})}}function Se(e){let t,n,r,o,i,s,a;return r=new Le({props:{radius:e[4]/6,state:e[3]}}),r.$on("click",e[6]),i=new _e({props:{radius:e[4]}}),i.$on("keyChanged",e[9]),s=new ke({props:{outerRadius:e[5],innerRadius:e[4],modeDefs:e[0]}}),s.$on("modeChanged",e[10]),{c(){t=p("svg"),n=p("g"),H(r.$$.fragment),o=p("g"),H(i.$$.fragment),H(s.$$.fragment),$(o,"transform","rotate(-15)"),$(n,"transform","translate("+Be/2+", "+Ne/2+")"),$(t,"viewBox","0 0 "+Be+" "+Ne),$(t,"class","svelte-12jd9ft")},m(e,l){u(e,t,l),c(t,n),W(r,n,null),c(n,o),W(i,o,null),W(s,o,null),a=!0},p(e,[t]){const n={};8&t&&(n.state=e[3]),r.$set(n);const o={};1&t&&(o.modeDefs=e[0]),s.$set(o)},i(e){a||(T(r.$$.fragment,e),T(i.$$.fragment,e),T(s.$$.fragment,e),a=!0)},o(e){R(r.$$.fragment,e),R(i.$$.fragment,e),R(s.$$.fragment,e),a=!1},d(e){e&&d(t),U(r),U(i),U(s)}}}const Be=256,Ne=256;function Ie(e,t,n){let r,o;a(e,ue,(e=>n(8,r=e))),a(e,fe,(e=>n(11,o=e)));var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};let{modeDefs:s}=t;const l=["G2 Ab2 A2 Bb2 B2 C3 Db3 D3 Eb3 E3 F3 Gb3","G3 Ab3 A3 Bb3 B3 C4 Db4 D4 Eb4 E4 F4 Gb4"].join(" ").split(" "),c=3*Math.min(Be,Ne)/8,u=15*Math.min(Be,Ne)/32;let d,f="C",m=0,p=!1;var h;h=()=>{},C().$$.on_mount.push(h);return e.$$set=e=>{"modeDefs"in e&&n(0,s=e.modeDefs)},e.$$.update=()=>{384&e.$$.dirty&&n(3,d="loaded"!==r?"loading":p?"playing":"stopped")},[s,f,m,d,c,u,function(){return i(this,void 0,void 0,(function*(){"loaded"===r&&(pe(),p||function(){i(this,void 0,void 0,(function*(){const e=60/o/2,t=[...s.slice(m),...s.slice(0,m)],r=t[0].semitones;let i=t.map((({semitones:e})=>(e+12-r)%12));i=[...i,12,...i.reverse()];const a=l.findIndex((e=>e.slice(0,-1)===f)),c=i.map(((t,n)=>({note:l[a+t],delay:0===n?0:e})));n(7,p=!0),yield me(c),n(7,p=!1)}))}())}))},p,r,({detail:e})=>n(1,f=e),({detail:e})=>n(2,m=e)]}class ze extends V{constructor(e){super(),q(this,e,Ie,Se,i,{modeDefs:0})}}function Ge(e,t,n){const r=e.slice();return r[4]=t[n].label,r[5]=t[n].value,r[6]=t[n].disabled,r}function Te(e){let t,n,o,i,s,a,l,f,p,v=e[4]+"";return{c(){t=m("label"),n=m("input"),s=g(),a=h(v),l=g(),$(n,"type","radio"),n.disabled=o=e[6],n.__value=i=e[5],n.value=n.__value,$(n,"class","svelte-1efhwmt"),e[3][0].push(n),$(t,"class","svelte-1efhwmt"),w(t,"disabled",e[6])},m(r,o){u(r,t,o),c(t,n),n.checked=n.__value===e[0],c(t,s),c(t,a),c(t,l),f||(p=[b(n,"change",e[2]),b(n,"click",Fe)],f=!0)},p(e,r){2&r&&o!==(o=e[6])&&(n.disabled=o),2&r&&i!==(i=e[5])&&(n.__value=i,n.value=n.__value),1&r&&(n.checked=n.__value===e[0]),2&r&&v!==(v=e[4]+"")&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(a,v),2&r&&w(t,"disabled",e[6])},d(o){o&&d(t),e[3][0].splice(e[3][0].indexOf(n),1),f=!1,r(p)}}}function Re(t){let n,r=t[1],o=[];for(let e=0;e<r.length;e+=1)o[e]=Te(Ge(t,r,e));return{c(){n=m("div");for(let e=0;e<o.length;e+=1)o[e].c();$(n,"class","group svelte-1efhwmt")},m(e,t){u(e,n,t);for(let e=0;e<o.length;e+=1)o[e].m(n,null)},p(e,[t]){if(3&t){let i;for(r=e[1],i=0;i<r.length;i+=1){const s=Ge(e,r,i);o[i]?o[i].p(s,t):(o[i]=Te(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:e,o:e,d(e){e&&d(n),f(o,e)}}}const Fe=e=>e.currentTarget.focus();function He(e,t,n){let{group:r}=t,{options:o=[]}=t;return e.$$set=e=>{"group"in e&&n(0,r=e.group),"options"in e&&n(1,o=e.options)},[r,o,function(){r=this.__value,n(0,r)},[[]]]}class We extends V{constructor(e){super(),q(this,e,He,Re,i,{group:0,options:1})}}function Ue(e){let t,n,r,o,i,s,a,l,f,p,h,b,v;function y(t){e[4](t)}let w={options:e[3]};function x(t){e[5](t)}void 0!==e[0]&&(w.group=e[0]),i=new We({props:w}),O.push((()=>F(i,"group",y)));let k={options:e[1]};return void 0!==e[2]&&(k.group=e[2]),h=new We({props:k}),O.push((()=>F(h,"group",x))),{c(){t=m("div"),n=m("div"),r=m("p"),r.textContent="Instrument:",o=g(),H(i.$$.fragment),a=g(),l=m("div"),f=m("p"),f.textContent="Tempo:",p=g(),H(h.$$.fragment),$(r,"class","name svelte-s5xc78"),$(n,"class","group svelte-s5xc78"),$(f,"class","name svelte-s5xc78"),$(l,"class","group svelte-s5xc78"),$(t,"class","options svelte-s5xc78")},m(e,s){u(e,t,s),c(t,n),c(n,r),c(n,o),W(i,n,null),c(t,a),c(t,l),c(l,f),c(l,p),W(h,l,null),v=!0},p(e,[t]){const n={};!s&&1&t&&(s=!0,n.group=e[0],L((()=>s=!1))),i.$set(n);const r={};2&t&&(r.options=e[1]),!b&&4&t&&(b=!0,r.group=e[2],L((()=>b=!1))),h.$set(r)},i(e){v||(T(i.$$.fragment,e),T(h.$$.fragment,e),v=!0)},o(e){R(i.$$.fragment,e),R(h.$$.fragment,e),v=!1},d(e){e&&d(t),U(i),U(h)}}}function Ze(e,t,n){let r,o,i;a(e,de,(e=>n(0,o=e))),a(e,fe,(e=>n(2,i=e)));const s=ie.instruments.map((({id:e,name:t})=>({value:e,label:t})));return e.$$.update=()=>{1&e.$$.dirty&&n(1,r=(()=>{const e=ie.instruments.map((({tempi:e})=>e)),t=[].concat(...e);return[...new Set(t)].map((e=>({value:e,label:e+" BPM",disabled:!ie.hasPreset({id:o,tempo:e})})))})())},[o,r,i,s,function(e){o=e,de.set(o)},function(e){i=e,fe.set(i)}]}class qe extends V{constructor(e){super(),q(this,e,Ze,Ue,i,{})}}function Ve(e){return e.map((([e,t])=>({name:t,semitones:e})))}const Je={melodic:{major:Ve([[0,"Ionian"],[2,"Dorian"],[4,"Phrygian"],[5,"Lydian"],[7,"Mixolydian"],[9,"Aeolian"],[11,"Locrian"]]),minor:Ve([[0,"Melodic minor"],[2,"Dorian ♭9"],[3,"Lydian aug."],[5,"Lydian ♭7"],[7,"Mixolydian ♭13"],[9,"Aeolian ♭5"],[11,"Altered"]])},harmonic:{major:Ve([[0,"Harmonic major"],[2,"Dorian ♭5"],[4,"Altered ♮5"],[5,"Lydian minor"],[7,"Mixolydian ♭9"],[8,"Lydian aug. ♯9"],[11,"Locrian 𝄫7"]]),minor:Ve([[0,"Harmonic minor"],[2,"Locrian ♮13"],[3,"Ionian aug."],[5,"Dorian ♯11"],[7,"Mixolydian ♭9 ♭13"],[8,"Lydian ♯2"],[11,"Altered ♭♭7"]])}};function Ke(e,t,n){const r=e.slice();return r[1]=t[n].name,r[2]=t[n].defs,r}function Qe(t){let n,r,o,i,s,a,l,f,p=t[1]+"";return a=new ze({props:{modeDefs:t[2]}}),{c(){n=m("h2"),r=h(p),o=h(" Modes"),i=g(),s=m("div"),H(a.$$.fragment),l=g(),$(n,"class","svelte-196j46k"),$(s,"class","wheel svelte-196j46k")},m(e,t){u(e,n,t),c(n,r),c(n,o),u(e,i,t),u(e,s,t),W(a,s,null),c(s,l),f=!0},p:e,i(e){f||(T(a.$$.fragment,e),f=!0)},o(e){R(a.$$.fragment,e),f=!1},d(e){e&&d(n),e&&d(i),e&&d(s),U(a)}}}function Xe(e){let t,n,o,i,s,a,l,p,h;l=new qe({});let b=e[0],v=[];for(let t=0;t<b.length;t+=1)v[t]=Qe(Ke(e,b,t));const y=e=>R(v[e],1,1,(()=>{v[e]=null}));return{c(){t=m("main"),n=m("h1"),n.textContent="Music Mode Wheels",o=g(),i=m("div"),s=m("h3"),s.textContent="Playback Options",a=g(),H(l.$$.fragment),p=g();for(let e=0;e<v.length;e+=1)v[e].c();$(n,"class","svelte-196j46k"),$(s,"class","svelte-196j46k"),$(t,"class","svelte-196j46k")},m(e,r){u(e,t,r),c(t,n),c(t,o),c(t,i),c(i,s),c(i,a),W(l,i,null),c(t,p);for(let e=0;e<v.length;e+=1)v[e].m(t,null);h=!0},p(e,[n]){if(1&n){let o;for(b=e[0],o=0;o<b.length;o+=1){const r=Ke(e,b,o);v[o]?(v[o].p(r,n),T(v[o],1)):(v[o]=Qe(r),v[o].c(),T(v[o],1),v[o].m(t,null))}for(G={r:0,c:[],p:G},o=b.length;o<v.length;o+=1)y(o);G.r||r(G.c),G=G.p}},i(e){if(!h){T(l.$$.fragment,e);for(let e=0;e<b.length;e+=1)T(v[e]);h=!0}},o(e){R(l.$$.fragment,e),v=v.filter(Boolean);for(let e=0;e<v.length;e+=1)R(v[e]);h=!1},d(e){e&&d(t),U(l),f(v,e)}}}function Ye(e){return[[{name:"Melodic Major",defs:Je.melodic.major},{name:"Melodic Minor",defs:Je.melodic.minor},{name:"Harmonic Major",defs:Je.harmonic.major},{name:"Harmonic Minor",defs:Je.harmonic.minor}]]}class et extends V{constructor(e){super(),q(this,e,Ye,Xe,i,{})}}function tt(t){let n;return{c(){n=m("footer"),n.innerHTML='<p>Made with <span class="red svelte-mr5kkz">♥</span> by\n    <a href="https://www.tobx.de/">Tobx</a></p>',$(n,"class","svelte-mr5kkz")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}class nt extends V{constructor(e){super(),q(this,e,null,tt,i,{})}}function rt(t){let n;return{c(){n=m("header"),n.innerHTML='<div class="flex-1 svelte-1al10k3"><a href="https://github.com/tobx/music-mode-wheels" class="icon svelte-1al10k3"><svg viewBox="0 0 64 64" fill="currentColor"><path d="M31.997,-0C14.327,-0 0,14.327 0,32.001C0,46.139 9.168,58.132 21.884,62.366C23.485,62.658 24.069,61.67 24.069,60.822C24.069,60.063 24.041,58.05 24.025,55.38C15.124,57.313 13.246,51.09 13.246,51.09C11.791,47.394 9.693,46.41 9.693,46.41C6.787,44.424 9.913,44.463 9.913,44.463C13.125,44.691 14.814,47.762 14.814,47.762C17.668,52.651 22.304,51.239 24.127,50.422C24.418,48.353 25.243,46.943 26.159,46.143C19.053,45.336 11.582,42.589 11.582,30.327C11.582,26.834 12.83,23.978 14.877,21.741C14.547,20.931 13.449,17.678 15.189,13.272C15.189,13.272 17.877,12.411 23.99,16.553C26.542,15.843 29.28,15.488 32.001,15.476C34.718,15.488 37.456,15.843 40.012,16.553C46.121,12.411 48.803,13.272 48.803,13.272C50.549,17.678 49.451,20.931 49.121,21.741C51.172,23.978 52.412,26.834 52.412,30.327C52.412,42.621 44.929,45.326 37.8,46.118C38.949,47.106 39.973,49.058 39.973,52.044C39.973,56.321 39.933,59.772 39.933,60.822C39.933,61.678 40.509,62.674 42.134,62.362C54.84,58.12 64,46.135 64,32.001C64,14.327 49.671,-0 31.997,-0"></path></svg></a></div> \n  <div class="center svelte-1al10k3"><strong class="svelte-1al10k3">No sound?</strong> \n    <span class="svelte-1al10k3">Check if your device is silenced.</span></div> \n  <div class="flex-1 svelte-1al10k3"></div>',$(n,"class","svelte-1al10k3")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}class ot extends V{constructor(e){super(),q(this,e,null,rt,i,{})}}function it(t){let n,r,o,i,s,a,l;return r=new ot({}),i=new et({}),a=new nt({}),{c(){n=m("div"),H(r.$$.fragment),o=g(),H(i.$$.fragment),s=g(),H(a.$$.fragment),$(n,"class","app svelte-xkr4hx")},m(e,t){u(e,n,t),W(r,n,null),c(n,o),W(i,n,null),c(n,s),W(a,n,null),l=!0},p:e,i(e){l||(T(r.$$.fragment,e),T(i.$$.fragment,e),T(a.$$.fragment,e),l=!0)},o(e){R(r.$$.fragment,e),R(i.$$.fragment,e),R(a.$$.fragment,e),l=!1},d(e){e&&d(n),U(r),U(i),U(a)}}}return new class extends V{constructor(e){super(),q(this,e,null,it,i,{})}}({target:document.body})}();
