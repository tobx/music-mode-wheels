var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function u(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function $(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function w(t,e,n){t.classList[n?"add":"remove"](e)}let x;function b(t){x=t}const y=[],v=[],C=[],M=[],k=Promise.resolve();let _=!1;function j(t){C.push(t)}let D=!1;const A=new Set;function L(){if(!D){D=!0;do{for(let t=0;t<y.length;t+=1){const e=y[t];b(e),E(e.$$)}for(b(null),y.length=0;v.length;)v.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];A.has(e)||(A.add(e),e())}C.length=0}while(y.length);for(;M.length;)M.pop()();_=!1,D=!1,A.clear()}}function E(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const q=new Set;let R;function B(t,e){t&&t.i&&(q.delete(t),t.i(e))}function H(t,e,n,o){if(t&&t.o){if(q.has(t))return;q.add(t),R.c.push((()=>{q.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function P(t){t&&t.c()}function S(t,n,i,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:f}=t.$$;a&&a.m(n,i),s||j((()=>{const n=l.map(e).filter(r);c?c.push(...n):o(n),t.$$.on_mount=[]})),f.forEach(j)}function N(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function O(t,e){-1===t.$$.dirty[0]&&(y.push(t),_||(_=!0,k.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,r,i,s,a,c,f=[-1]){const u=x;b(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:f,skip_bound:!1};let m=!1;if(d.ctx=i?i(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),m&&O(e,t)),n})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(l)}else d.fragment&&d.fragment.c();r.intro&&B(e.$$.fragment),S(e,r.target,r.anchor,r.customElement),L()}b(u)}class T{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const W={melodic:{major:[[0,"Ionian"],[2,"Dorian"],[4,"Phrygian"],[5,"Lydian"],[7,"Mixolydian"],[9,"Aeolian"],[11,"Locrian"]],minor:[[0,"Melodic minor"],[2,"Dorian ‚ô≠9"],[3,"Lydian aug."],[5,"Lydian ‚ô≠7"],[7,"Mixolydian ‚ô≠13"],[9,"Aeolian ‚ô≠5"],[11,"Altered"]]},harmonic:{major:[[0,"Harmonic major"],[2,"Dorian ‚ô≠5"],[4,"Altered ‚ôÆ5"],[5,"Lydian minor"],[7,"Mixolydian ‚ô≠9"],[8,"Lydian aug. ‚ôØ9"],[11,"Locrian ùÑ´7"]],minor:[[0,"Harmonic minor"],[2,"Locrian ‚ôÆ13"],[3,"Ionian aug."],[5,"Dorian ‚ôØ11"],[7,"Mixolydian ‚ô≠9 ‚ô≠13"],[8,"Lydian ‚ôØ2"],[11,"Altered ‚ô≠‚ô≠7"]]}},G=Math.PI/180;function I(t){return[`M 0 ${t}`,`a ${t} ${t} 0 0 1 0 ${-2*t}`,`a ${t} ${t} 0 0 1 0 ${2*t}`].join("")}function F(t,e,n){const o=n*G,r=Math.cos(o),i=Math.sin(o);return[`M ${e} 0`,`A ${e} ${e} 0 0 1 ${r*e} ${i*e}`,`L ${r*t} ${i*t}`,`A ${t} ${t} 0 0 0 ${t} 0`,"Z"].join(" ")}function Z(t,e,n){const o=t.slice();return o[8]=e[n],o[10]=n,o}function J(t){let e,n,o,r,i,c,f,x,b,y,v,C,M,k,_=`${t[10]+1}. `,j=t[8].name+"";function D(){return t[7](t[8])}return{c(){e=u("g"),n=u("path"),o=u("text"),r=u("textPath"),i=u("tspan"),c=d(_),f=m(),x=u("tspan"),b=d(j),y=m(),v=u("circle"),g(n,"d",t[8].path),g(n,"transform","rotate(-90)"),g(n,"class","svelte-jw8x3b"),g(i,"alignment-baseline","middle"),$(i,"font-size",Q+"px"),g(x,"alignment-baseline","middle"),$(x,"font-size",t[8].fontSize+"px"),g(r,"startOffset","50%"),p(r,"xlink:href","#mode-text-circle"),g(o,"text-anchor","middle"),g(o,"dominant-baseline","middle"),g(o,"transform","rotate(15)"),g(o,"class","svelte-jw8x3b"),g(v,"cy",C=-t[0]),g(v,"r","5"),g(v,"transform","rotate(15)"),g(v,"class","svelte-jw8x3b"),g(e,"class","mode svelte-jw8x3b"),g(e,"transform","rotate("+t[8].rotation+")"),w(e,"active",t[8]===t[1])},m(t,l){a(t,e,l),s(e,n),s(e,o),s(o,r),s(r,i),s(i,c),s(r,f),s(r,x),s(x,b),s(r,y),s(e,v),M||(k=h(e,"click",D),M=!0)},p(n,o){t=n,1&o&&C!==(C=-t[0])&&g(v,"cy",C),18&o&&w(e,"active",t[8]===t[1])},d(t){t&&l(e),M=!1,k()}}}function K(e){let n,o,r,i,f,d=e[4],h=[];for(let t=0;t<d.length;t+=1)h[t]=J(Z(e,d,t));return{c(){n=u("defs"),o=u("path"),r=m(),i=u("g"),f=u("circle");for(let t=0;t<h.length;t+=1)h[t].c();g(o,"id","mode-text-circle"),g(o,"d",I(e[3])),g(f,"r",e[0]),g(f,"class","svelte-jw8x3b"),g(i,"class","wheel svelte-jw8x3b"),$(i,"transform","rotate("+e[2]+"deg)")},m(t,e){a(t,n,e),s(n,o),a(t,r,e),a(t,i,e),s(i,f);for(let t=0;t<h.length;t+=1)h[t].m(i,null)},p(t,[e]){if(1&e&&g(f,"r",t[0]),19&e){let n;for(d=t[4],n=0;n<d.length;n+=1){const o=Z(t,d,n);h[n]?h[n].p(o,e):(h[n]=J(o),h[n].c(),h[n].m(i,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}4&e&&$(i,"transform","rotate("+t[2]+"deg)")},i:t,o:t,d(t){t&&l(n),t&&l(r),t&&l(i),c(h,t)}}}const Q=8;function U(t,e,n){let{outerRadius:o}=e,{innerRadius:r}=e,{modeDefs:i}=e;const s=(o+r)/2,a=i.map((([t,e])=>({name:e,rotation:30*t,path:F(r,o,30),get angle(){return-this.rotation},get fontSize(){return Math.min(Q,88/this.name.length)}})));let l=a[0],c=0;return t.$$set=t=>{"outerRadius"in t&&n(5,o=t.outerRadius),"innerRadius"in t&&n(0,r=t.innerRadius),"modeDefs"in t&&n(6,i=t.modeDefs)},t.$$.update=()=>{if(6&t.$$.dirty){const t=l.angle-c;n(2,c+=(t%360+540)%360-180)}},[r,l,c,s,a,o,i,t=>n(1,l=t)]}class V extends T{constructor(t){super(),z(this,t,U,K,i,{outerRadius:5,innerRadius:0,modeDefs:6})}}function X(t,e,n){const o=t.slice();return o[11]=e[n],o}function Y(t){let e,n,o,r,i,c,f,m=t[11].name+"";function $(){return t[6](t[11])}return{c(){e=u("g"),n=u("path"),o=u("text"),r=u("textPath"),i=d(m),g(n,"d",t[11].path),g(n,"transform","rotate(-90)"),g(n,"class","svelte-tf64n7"),g(r,"startOffset","50%"),g(r,"text-anchor","middle"),g(r,"alignment-baseline","middle"),p(r,"xlink:href","#key-text-circle"),g(o,"dominant-baseline","middle"),g(o,"transform","rotate("+t[11].textAngle+")"),g(o,"class","svelte-tf64n7"),g(e,"class","key "+t[11].type+" svelte-tf64n7"),g(e,"transform","rotate("+t[11].rotation+")"),w(e,"active",t[11]===t[0])},m(t,l){a(t,e,l),s(e,n),s(e,o),s(o,r),s(r,i),c||(f=h(e,"click",$),c=!0)},p(n,o){t=n,25&o&&w(e,"active",t[11]===t[0])},d(t){t&&l(e),c=!1,f()}}}function tt(e){let n,o,r,i,f=e[4].concat(e[3]),d=[];for(let t=0;t<f.length;t+=1)d[t]=Y(X(e,f,t));return{c(){n=u("defs"),o=u("path"),r=m(),i=u("g");for(let t=0;t<d.length;t+=1)d[t].c();g(o,"id","key-text-circle"),g(o,"d",I(e[2])),g(i,"class","wheel"),$(i,"transform","rotate("+e[1]+"deg)")},m(t,e){a(t,n,e),s(n,o),a(t,r,e),a(t,i,e);for(let t=0;t<d.length;t+=1)d[t].m(i,null)},p(t,[e]){if(25&e){let n;for(f=t[4].concat(t[3]),n=0;n<f.length;n+=1){const o=X(t,f,n);d[n]?d[n].p(o,e):(d[n]=Y(o),d[n].c(),d[n].m(i,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=f.length}2&e&&$(i,"transform","rotate("+t[1]+"deg)")},i:t,o:t,d(t){t&&l(n),t&&l(r),t&&l(i),c(d,t)}}}function et(t,e,n){let{radius:o}=e;const r=2/3*o,i=o/2,s=(o+r)/2-1;function a(t,e,n,s=30,a=15){const l="white"===t;return{type:t,name:e,rotation:n,textAngle:a,path:F(l?i:r,o,s),get angle(){return 15-n-a},isWhite:l}}const l=[a("white","C",0,45,15),a("black","C‚ôØ‚Äâ/‚ÄâD‚ô≠",30),a("white","D",45,60,30),a("black","D‚ôØ‚Äâ/‚ÄâE‚ô≠",90),a("white","E",105,45,30),a("white","F",150,45,15),a("black","F‚ôØ‚Äâ/‚ÄâG‚ô≠",180),a("white","G",195,60,30),a("black","G‚ôØ‚Äâ/‚ÄâA‚ô≠",240),a("white","A",255,60,30),a("black","A‚ôØ‚Äâ/‚ÄâB‚ô≠",300),a("white","B",315,45,30)],c=l.filter((t=>!t.isWhite)),f=l.filter((t=>t.isWhite));let u=l[0],d=0;return t.$$set=t=>{"radius"in t&&n(5,o=t.radius)},t.$$.update=()=>{if(3&t.$$.dirty){const t=u.angle-d;n(1,d+=(t%360+540)%360-180)}},[u,d,s,c,f,o,t=>n(0,u=t)]}class nt extends T{constructor(t){super(),z(this,t,et,tt,i,{radius:5})}}function ot(t){let e,n,o,r,i;return o=new nt({props:{radius:t[1]}}),r=new V({props:{outerRadius:t[2],innerRadius:t[1],modeDefs:t[0]}}),{c(){e=u("svg"),n=u("g"),P(o.$$.fragment),P(r.$$.fragment),g(n,"transform","translate("+rt/2+", "+it/2+") rotate(-15)"),g(e,"viewBox","0 0 "+rt+" "+it),g(e,"class","svelte-1if29gr")},m(t,l){a(t,e,l),s(e,n),S(o,n,null),S(r,n,null),i=!0},p(t,[e]){const n={};1&e&&(n.modeDefs=t[0]),r.$set(n)},i(t){i||(B(o.$$.fragment,t),B(r.$$.fragment,t),i=!0)},o(t){H(o.$$.fragment,t),H(r.$$.fragment,t),i=!1},d(t){t&&l(e),N(o),N(r)}}}const rt=256,it=256;function st(t,e,n){let{modeDefs:o}=e;const r=3*Math.min(rt,it)/8,i=15*Math.min(rt,it)/32;return t.$$set=t=>{"modeDefs"in t&&n(0,o=t.modeDefs)},[o,r,i]}class at extends T{constructor(t){super(),z(this,t,st,ot,i,{modeDefs:0})}}function lt(t,e,n){const o=t.slice();return o[1]=e[n].name,o[2]=e[n].defs,o}function ct(e){let n,o,r,i,c,u,h,p,$=e[1]+"";return u=new at({props:{modeDefs:e[2]}}),{c(){n=f("h2"),o=d($),r=d(" Modes"),i=m(),c=f("div"),P(u.$$.fragment),h=m(),g(n,"class","svelte-9wq6s4"),g(c,"class","wheel svelte-9wq6s4")},m(t,e){a(t,n,e),s(n,o),s(n,r),a(t,i,e),a(t,c,e),S(u,c,null),s(c,h),p=!0},p:t,i(t){p||(B(u.$$.fragment,t),p=!0)},o(t){H(u.$$.fragment,t),p=!1},d(t){t&&l(n),t&&l(i),t&&l(c),N(u)}}}function ft(t){let e,n,r,i,u,d,h,p,$,w=t[0],x=[];for(let e=0;e<w.length;e+=1)x[e]=ct(lt(t,w,e));const b=t=>H(x[t],1,1,(()=>{x[t]=null}));return{c(){e=f("div"),n=f("header"),n.innerHTML='<a href="https://github.com/tobx/music-mode-wheels" class="icon svelte-9wq6s4"><svg viewBox="0 0 136 133" fill="currentColor"><path d="M67.867,0C30.388,0 0,30.387 0,67.875C0,97.863 19.446,123.3 46.417,132.279C49.813,132.9 51.05,130.804 51.05,129.004C51.05,127.396 50.992,123.125 50.958,117.463C32.079,121.563 28.096,108.363 28.096,108.363C25.008,100.525 20.558,98.438 20.558,98.438C14.396,94.225 21.025,94.308 21.025,94.308C27.838,94.792 31.421,101.304 31.421,101.304C37.475,111.675 47.308,108.679 51.175,106.946C51.792,102.558 53.542,99.567 55.483,97.871C40.413,96.158 24.567,90.333 24.567,64.325C24.567,56.917 27.213,50.858 31.554,46.112C30.854,44.396 28.525,37.496 32.217,28.15C32.217,28.15 37.917,26.325 50.883,35.108C56.296,33.604 62.104,32.85 67.875,32.825C73.638,32.85 79.446,33.604 84.867,35.108C97.825,26.325 103.513,28.15 103.513,28.15C107.217,37.496 104.888,44.396 104.188,46.112C108.538,50.858 111.167,56.917 111.167,64.325C111.167,90.4 95.296,96.138 80.175,97.817C82.613,99.912 84.783,104.054 84.783,110.387C84.783,119.458 84.7,126.779 84.7,129.004C84.7,130.821 85.921,132.933 89.367,132.271C116.317,123.275 135.746,97.854 135.746,67.875C135.746,30.387 105.354,0 67.867,0"></path></svg></a>',r=m(),i=f("main"),u=f("h1"),u.textContent="Music Mode Wheels",d=m();for(let t=0;t<x.length;t+=1)x[t].c();h=m(),p=f("footer"),p.innerHTML='<p>Made with <span class="red svelte-9wq6s4">‚ô•</span> by\n      <a href="https://www.tobx.de/" class="svelte-9wq6s4">Tobx</a></p>',g(n,"class","svelte-9wq6s4"),g(u,"class","svelte-9wq6s4"),g(i,"class","svelte-9wq6s4"),g(p,"class","svelte-9wq6s4"),g(e,"class","app")},m(t,o){a(t,e,o),s(e,n),s(e,r),s(e,i),s(i,u),s(i,d);for(let t=0;t<x.length;t+=1)x[t].m(i,null);s(e,h),s(e,p),$=!0},p(t,[e]){if(1&e){let n;for(w=t[0],n=0;n<w.length;n+=1){const o=lt(t,w,n);x[n]?(x[n].p(o,e),B(x[n],1)):(x[n]=ct(o),x[n].c(),B(x[n],1),x[n].m(i,null))}for(R={r:0,c:[],p:R},n=w.length;n<x.length;n+=1)b(n);R.r||o(R.c),R=R.p}},i(t){if(!$){for(let t=0;t<w.length;t+=1)B(x[t]);$=!0}},o(t){x=x.filter(Boolean);for(let t=0;t<x.length;t+=1)H(x[t]);$=!1},d(t){t&&l(e),c(x,t)}}}function ut(t){return[[{name:"Melodic Major",defs:W.melodic.major},{name:"Melodic Minor",defs:W.melodic.minor},{name:"Harmonic Major",defs:W.harmonic.major},{name:"Harmonic Minor",defs:W.harmonic.minor}]]}return new class extends T{constructor(t){super(),z(this,t,ut,ft,i,{})}}({target:document.body})}();
