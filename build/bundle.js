var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function a(e,t,n){e.$$.on_destroy.push(s(t,n))}function l(e){return null==e?"":e}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function h(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function g(){return m(" ")}function b(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function w(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function y(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function x(e,t,n){e.classList[n?"add":"remove"](t)}let P;function j(e){P=e}function k(){if(!P)throw new Error("Function called outside component initialization");return P}function O(){const e=k();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach((t=>{t.call(e,i)}))}}}const C=[],_=[],A=[],E=[],M=Promise.resolve();let D=!1;function L(e){A.push(e)}function I(e){E.push(e)}let S=!1;const T=new Set;function z(){if(!S){S=!0;do{for(let e=0;e<C.length;e+=1){const t=C[e];j(t),B(t.$$)}for(j(null),C.length=0;_.length;)_.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];T.has(t)||(T.add(t),t())}A.length=0}while(C.length);for(;E.length;)E.pop()();D=!1,S=!1,T.clear()}}function B(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const N=new Set;let G;function F(){G={r:0,c:[],p:G}}function R(){G.r||r(G.c),G=G.p}function H(e,t){e&&e.i&&(N.delete(e),e.i(t))}function q(e,t,n,r){if(e&&e.o){if(N.has(e))return;N.add(e),G.c.push((()=>{N.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function U(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function W(e){e&&e.c()}function Z(e,n,o,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(n,o),s||L((()=>{const n=l.map(t).filter(i);c?c.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(L)}function V(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(C.push(e),D||(D=!0,M.then(z)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,i,o,s,a,l,c=[-1]){const u=P;j(t);const f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=o?o(t,i.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&J(t,e)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);f.fragment&&f.fragment.l(e),e.forEach(d)}else f.fragment&&f.fragment.c();i.intro&&H(t.$$.fragment),Z(t,i.target,i.anchor,i.customElement),z()}j(u)}class Q{$destroy(){V(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function X(e,t,n){const r=e.slice();return r[4]=t[n].label,r[5]=t[n].value,r[6]=t[n].disabled,r}function Y(e){let t,n,i,o,s,a,l,f,h,w=e[4]+"";return{c(){t=p("label"),n=p("input"),s=g(),a=m(w),l=g(),$(n,"type","radio"),n.disabled=i=e[6],n.__value=o=e[5],n.value=n.__value,$(n,"class","svelte-1hi13zh"),e[3][0].push(n),$(t,"class","svelte-1hi13zh"),x(t,"disabled",e[6])},m(r,i){u(r,t,i),c(t,n),n.checked=n.__value===e[0],c(t,s),c(t,a),c(t,l),f||(h=[b(n,"change",e[2]),b(n,"click",te)],f=!0)},p(e,r){2&r&&i!==(i=e[6])&&(n.disabled=i),2&r&&o!==(o=e[5])&&(n.__value=o,n.value=n.__value),1&r&&(n.checked=n.__value===e[0]),2&r&&w!==(w=e[4]+"")&&v(a,w),2&r&&x(t,"disabled",e[6])},d(i){i&&d(t),e[3][0].splice(e[3][0].indexOf(n),1),f=!1,r(h)}}}function ee(t){let n,r=t[1],i=[];for(let e=0;e<r.length;e+=1)i[e]=Y(X(t,r,e));return{c(){n=p("div");for(let e=0;e<i.length;e+=1)i[e].c();$(n,"class","group svelte-1hi13zh")},m(e,t){u(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(3&t){let o;for(r=e[1],o=0;o<r.length;o+=1){const s=X(e,r,o);i[o]?i[o].p(s,t):(i[o]=Y(s),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:e,o:e,d(e){e&&d(n),f(i,e)}}}const te=e=>e.currentTarget.focus();function ne(e,t,n){let{group:r}=t,{options:i=[]}=t;return e.$$set=e=>{"group"in e&&n(0,r=e.group),"options"in e&&n(1,i=e.options)},[r,i,function(){r=this.__value,n(0,r)},[[]]]}class re extends Q{constructor(e){super(),K(this,e,ne,ee,o,{group:0,options:1})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */const ie=[];function oe(t,n=e){let r;const i=[];function s(e){if(o(t,e)&&(t=e,r)){const e=!ie.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),ie.push(n,t)}if(e){for(let e=0;e<ie.length;e+=2)ie[e][0](ie[e+1]);ie.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,a=e){const l=[o,a];return i.push(l),1===i.length&&(r=n(s)||e),o(t),()=>{const e=i.indexOf(l);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}var se;const ae=null!==(se=window.AudioContext)&&void 0!==se?se:window.webkitAudioContext;function le(){if(void 0===ae)throw new Error("AudioContext is not supported.");return new ae}class ce{constructor(){Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:le()})}async decode(e){return new Promise(((t,n)=>{this.context.decodeAudioData(e,t,n)}))}}async function ue(e){await new Promise((t=>e.addEventListener("ended",t)))}class de{constructor(){Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:le()}),Object.defineProperty(this,"gainNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sources",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),this.gainNode=this.createGain()}get currentTime(){return this.context.currentTime}createGain(){const e=this.context.createGain();return e.connect(this.context.destination),e}async stop(e=.04,t=-96,n=.01){const r=this.context.currentTime+n,i=r+e,o=20*e/(t*-Math.log(10));this.gainNode.gain.setTargetAtTime(0,r,o),this.gainNode=this.createGain();const s=[...this.sources].map((async e=>{e.stop(i),await ue(e)}));await Promise.all(s)}async play(e,t,n,r){const i=this.context.createBufferSource();i.buffer=e,i.connect(this.gainNode),this.sources.add(i),i.start(t,n,r),await ue(i),this.sources.delete(i),i.disconnect()}}function fe(e,t){return"/"===e.slice(-1)?e+t:e+"/"+t}var pe={url:"instruments",index:{piano:{name:"Piano",presets:[{tempo:60,path:"piano/500ms"},{tempo:120,path:"piano/250ms"}]},vibraphone:{name:"Vibraphone",presets:[{tempo:60,path:"vibraphone/500ms"},{tempo:120,path:"vibraphone/250ms"}]}}},he={id:"piano",tempo:120};const me=new class{constructor(e,t){Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"decoder",{enumerable:!0,configurable:!0,writable:!0,value:new ce})}getUrl({id:e,tempo:t}){var n;const r=null===(n=this.index[e])||void 0===n?void 0:n.presets.find((({tempo:e})=>e===t));if(void 0===r){throw new Error(`Cannot find tempo '${t}' for instrument id '${e}'.`)}return fe(this.url,r.path)}get instruments(){return Object.keys(this.index).map((e=>this.getInstrument(e)))}hasPreset({id:e,tempo:t}){var n;return null===(n=this.getInstrument(e))||void 0===n?void 0:n.tempi.includes(t)}getInstrument(e){if(this.index.hasOwnProperty(e)){const{name:t,presets:n}=this.index[e];return{id:e,name:t,tempi:n.map((e=>e.tempo))}}}async loadSamples(e){const t=this.getUrl(e),[n,r]=await Promise.all([this.loadSampleIndex(t),this.loadSampleFile(t)]);let i=0;const o=n.map((async({note:e,bytes:t})=>{const n=i+t,o=r.slice(i,n);return i=n,{note:e,buffer:await this.decoder.decode(o)}}));return Promise.all(o)}async loadSampleIndex(e){return(await fetch(fe(e,"index.json"))).json()}async loadSampleFile(e){return(await fetch(fe(e,"samples.bin"))).arrayBuffer()}}(pe.url,pe.index),ge=new class{constructor(e,t=.01){Object.defineProperty(this,"library",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"latency",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"player",{enumerable:!0,configurable:!0,writable:!0,value:new de}),Object.defineProperty(this,"buffers",{enumerable:!0,configurable:!0,writable:!0,value:{}})}async load(e){await this.unload();const t=await this.library.loadSamples(e);for(const{note:e,buffer:n}of t)this.buffers[e]=n}async playNote(e,t,n,r){const i=this.buffers[e];void 0!==i&&await this.player.play(i,t,n,r)}async playPattern(e){let t=this.player.currentTime+this.latency;const n=e.map((async({note:e,delay:n})=>{t+=n,await this.playNote(e,t)}));await Promise.all(n)}async stop(){await this.player.stop()}async unload(){this.buffers={},await this.stop()}}(me),be=oe("initial"),{set:$e,update:we}=be,ve=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(be,["set","update"]),ye=oe(he.id),xe=oe(he.tempo);(function(t,n,o){const a=!Array.isArray(t),l=a?[t]:t,c=n.length<2;return{subscribe:oe(o,(t=>{let o=!1;const u=[];let d=0,f=e;const p=()=>{if(d)return;f();const r=n(a?u[0]:u,t);c?t(r):f=i(r)?r:e},h=l.map(((e,t)=>s(e,(e=>{u[t]=e,d&=~(1<<t),o&&p()}),(()=>{d|=1<<t}))));return o=!0,p(),function(){r(h),f()}})).subscribe}})([ye,xe],(([e,t])=>({id:e,tempo:t}))).subscribe((async e=>{if(me.hasPreset(e))$e("loading"),await ge.load(e),$e("loaded");else{const t=me.getInstrument(e.id);if(void 0===t)throw new Error("Cannot find instrument with id: "+e.id);xe.set(t.tempi[0])}}));const Pe=async e=>{await ge.playPattern(e)},je=async()=>{await ge.stop()};function ke(e){let t,n,r,i,o,s,a,l,f,h,m,b,w;function v(t){e[4](t)}let y={options:e[3]};function x(t){e[5](t)}void 0!==e[0]&&(y.group=e[0]),o=new re({props:y}),_.push((()=>U(o,"group",v)));let P={options:e[1]};return void 0!==e[2]&&(P.group=e[2]),m=new re({props:P}),_.push((()=>U(m,"group",x))),{c(){t=p("div"),n=p("div"),r=p("p"),r.textContent="Instrument:",i=g(),W(o.$$.fragment),a=g(),l=p("div"),f=p("p"),f.textContent="Tempo:",h=g(),W(m.$$.fragment),$(r,"class","name svelte-s5xc78"),$(n,"class","group svelte-s5xc78"),$(f,"class","name svelte-s5xc78"),$(l,"class","group svelte-s5xc78"),$(t,"class","options svelte-s5xc78")},m(e,s){u(e,t,s),c(t,n),c(n,r),c(n,i),Z(o,n,null),c(t,a),c(t,l),c(l,f),c(l,h),Z(m,l,null),w=!0},p(e,[t]){const n={};!s&&1&t&&(s=!0,n.group=e[0],I((()=>s=!1))),o.$set(n);const r={};2&t&&(r.options=e[1]),!b&&4&t&&(b=!0,r.group=e[2],I((()=>b=!1))),m.$set(r)},i(e){w||(H(o.$$.fragment,e),H(m.$$.fragment,e),w=!0)},o(e){q(o.$$.fragment,e),q(m.$$.fragment,e),w=!1},d(e){e&&d(t),V(o),V(m)}}}function Oe(e,t,n){let r,i,o;a(e,ye,(e=>n(0,i=e))),a(e,xe,(e=>n(2,o=e)));const s=me.instruments.map((({id:e,name:t})=>({value:e,label:t})));return e.$$.update=()=>{1&e.$$.dirty&&n(1,r=(()=>{const e=me.instruments.map((({tempi:e})=>e)),t=[].concat(...e);return[...new Set(t)].map((e=>({value:e,label:e+" BPM",disabled:!me.hasPreset({id:i,tempo:e})})))})())},[i,r,o,s,function(e){i=e,ye.set(i)},function(e){o=e,xe.set(o)}]}class Ce extends Q{constructor(e){super(),K(this,e,Oe,ke,o,{})}}class _e{constructor(){Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:e=>{}}),Object.defineProperty(this,"duration",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"startTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"requestId",{enumerable:!0,configurable:!0,writable:!0,value:0})}start(e){return this.startTime=window.performance.now(),this.duration=e,this.stop(),this.loop(),this.startTime}stop(){window.cancelAnimationFrame(this.requestId)}async loop(){const e=await async function(e){return await new Promise((t=>{e(window.requestAnimationFrame(t))}))}((e=>this.requestId=e))-this.startTime;e<this.duration?(this.update(e/this.duration),this.loop()):this.update(1)}}function Ae(e){const t=function(e){return e*e*e}(e),n=function(e){return--e*e*e+1}(e);return function(e,t,n){return e+n*(t-e)}(t,n,n)}function Ee(e){return e}const Me=Math.PI/180;function De(e){return[`M 0 ${e}`,`a ${e} ${e} 0 0 1 0 ${-2*e}`,`a ${e} ${e} 0 0 1 0 ${2*e}`].join(" ")}function Le(e,t,n){const r=n*Me,i=Math.cos(r),o=Math.sin(r);return[`M ${e} 0`,`A ${e} ${e} 0 0 1 ${i*e} ${o*e}`,`L ${i*t} ${o*t}`,`A ${t} ${t} 0 0 0 ${t} 0`,"Z"].join(" ")}class Ie{constructor(e,t,n,r="%"){if(Object.defineProperty(this,"from",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"to",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"parts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.parts=e.split(r),t.length!==n.length)throw new Error("'from' length ‚â† 'to' length");if(t.length+1!==this.parts.length)throw new Error("placeholder count ‚â† values count")}morph(e){return this.parts.reduce(((t,n,r)=>{const i=r-1,o=this.from[i],s=this.to[i];return t+(o+e*(s-o))+n}))}}class Se{constructor(e,t,n){Object.defineProperty(this,"morpher",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"duration",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"ease",{enumerable:!0,configurable:!0,writable:!0,value:Ee}),Object.defineProperty(this,"loop",{enumerable:!0,configurable:!0,writable:!0,value:new _e}),Object.defineProperty(this,"position",{enumerable:!0,configurable:!0,writable:!0,value:0})}animate(e){const t=this.position,n=e-this.position,r=Math.abs(n)*this.duration;this.loop.update=e=>{this.position=t+this.ease(e)*n,this.triggerUpdate()},this.loop.start(r)}set(e){this.position=e,this.triggerUpdate()}triggerUpdate(){this.update(this.morpher.morph(this.position))}stop(){this.loop.stop()}}function Te(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function ze(e){let t,n,r,i,o,s,a,l,f,p,v,P,j,k,O=`${e[13]+1}. `,C=e[11].name+"";function _(){return e[8](e[11],e[13])}return{c(){t=h("g"),n=h("path"),r=h("text"),i=h("textPath"),o=h("tspan"),s=m(O),a=g(),l=h("tspan"),f=m(C),p=g(),v=h("circle"),$(n,"d",e[11].path),$(n,"transform","rotate(-90)"),$(n,"class","svelte-12ricdg"),$(o,"alignment-baseline","middle"),y(o,"font-size",Ne+"px"),$(l,"alignment-baseline","middle"),y(l,"font-size",e[11].fontSize+"px"),$(i,"startOffset","50%"),w(i,"xlink:href","#mode-text-circle"),$(r,"text-anchor","middle"),$(r,"dominant-baseline","middle"),$(r,"transform","rotate(15)"),$(r,"class","svelte-12ricdg"),$(v,"cy",P=-e[0]),$(v,"r","5"),$(v,"transform","rotate(15)"),$(v,"class","svelte-12ricdg"),$(t,"class","mode svelte-12ricdg"),$(t,"transform","rotate("+e[11].rotation+")"),x(t,"selected",e[11]===e[1])},m(e,d){u(e,t,d),c(t,n),c(t,r),c(r,i),c(i,o),c(o,s),c(i,a),c(i,l),c(l,f),c(i,p),c(t,v),j||(k=b(t,"click",_),j=!0)},p(n,r){e=n,1&r&&P!==(P=-e[0])&&$(v,"cy",P),18&r&&x(t,"selected",e[11]===e[1])},d(e){e&&d(t),j=!1,k()}}}function Be(t){let n,r,i,o,s,a=t[4],l=[];for(let e=0;e<a.length;e+=1)l[e]=ze(Te(t,a,e));return{c(){n=h("defs"),r=h("path"),i=g(),o=h("g"),s=h("circle");for(let e=0;e<l.length;e+=1)l[e].c();$(r,"id","mode-text-circle"),$(r,"d",De(t[3])),$(s,"r",t[0]),$(s,"class","svelte-12ricdg"),$(o,"class","wheel svelte-12ricdg"),y(o,"transform","rotate("+t[2]+"deg)")},m(e,t){u(e,n,t),c(n,r),u(e,i,t),u(e,o,t),c(o,s);for(let e=0;e<l.length;e+=1)l[e].m(o,null)},p(e,[t]){if(1&t&&$(s,"r",e[0]),51&t){let n;for(a=e[4],n=0;n<a.length;n+=1){const r=Te(e,a,n);l[n]?l[n].p(r,t):(l[n]=ze(r),l[n].c(),l[n].m(o,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}4&t&&y(o,"transform","rotate("+e[2]+"deg)")},i:e,o:e,d(e){e&&d(n),e&&d(i),e&&d(o),f(l,e)}}}const Ne=8;function Ge(e,t,n){let{outerRadius:r}=t,{innerRadius:i}=t,{modeDefs:o}=t;const s=O(),a=(r+i)/2;class l{constructor(e){Object.defineProperty(this,"def",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"path",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.path=Le(r,i,30)}get angle(){return-this.rotation}get fontSize(){return Math.min(Ne,88/this.name.length)}get name(){return this.def.name}get rotation(){return 30*this.def.semitones}}const c=o.map((e=>new l(e)));function u(e,t){n(1,d=e),s("modeChanged",t)}let d=c[0],f=0;return e.$$set=e=>{"outerRadius"in e&&n(6,r=e.outerRadius),"innerRadius"in e&&n(0,i=e.innerRadius),"modeDefs"in e&&n(7,o=e.modeDefs)},e.$$.update=()=>{if(6&e.$$.dirty){const e=d.angle-f;n(2,f+=(e%360+540)%360-180)}},[i,d,f,a,c,u,r,o,(e,t)=>u(e,t)]}class Fe extends Q{constructor(e){super(),K(this,e,Ge,Be,o,{outerRadius:6,innerRadius:0,modeDefs:7})}}function Re(e,t,n){const r=e.slice();return r[13]=t[n],r}function He(e){let t,n,r,i,o,s,a,l=e[13].displayName+"";function f(){return e[7](e[13])}return{c(){t=h("g"),n=h("path"),r=h("text"),i=h("textPath"),o=m(l),$(n,"d",e[13].path),$(n,"transform","rotate(-90)"),$(n,"class","svelte-zs6wzo"),$(i,"startOffset","50%"),$(i,"text-anchor","middle"),$(i,"alignment-baseline","middle"),w(i,"xlink:href","#key-text-circle"),$(r,"dominant-baseline","middle"),$(r,"transform","rotate("+e[13].textAngle+")"),$(r,"class","svelte-zs6wzo"),$(t,"class","key "+e[13].type+" svelte-zs6wzo"),$(t,"transform","rotate("+e[13].rotation+")"),x(t,"selected",e[13]===e[0])},m(e,l){u(e,t,l),c(t,n),c(t,r),c(r,i),c(i,o),s||(a=b(t,"click",f),s=!0)},p(n,r){e=n,49&r&&x(t,"selected",e[13]===e[0])},d(e){e&&d(t),s=!1,a()}}}function qe(t){let n,r,i,o,s=t[5].concat(t[4]),a=[];for(let e=0;e<s.length;e+=1)a[e]=He(Re(t,s,e));return{c(){n=h("defs"),r=h("path"),i=g(),o=h("g");for(let e=0;e<a.length;e+=1)a[e].c();$(r,"id","key-text-circle"),$(r,"d",De(t[2])),$(o,"class","wheel"),y(o,"transform","rotate("+t[1]+"deg)")},m(e,t){u(e,n,t),c(n,r),u(e,i,t),u(e,o,t);for(let e=0;e<a.length;e+=1)a[e].m(o,null)},p(e,[t]){if(57&t){let n;for(s=e[5].concat(e[4]),n=0;n<s.length;n+=1){const r=Re(e,s,n);a[n]?a[n].p(r,t):(a[n]=He(r),a[n].c(),a[n].m(o,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}2&t&&y(o,"transform","rotate("+e[1]+"deg)")},i:e,o:e,d(e){e&&d(n),e&&d(i),e&&d(o),f(a,e)}}}function Ue(e,t,n){let{radius:r}=t;const i=O(),o=2/3*r,s=r/2,a=(r+o)/2-1;class l{constructor(e,t,n,i,a=30,l=15){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"displayName",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"rotation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"keyAngle",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"textAngle",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"path",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const c=this.isWhite?s:o;this.path=Le(r,c,a)}get angle(){return 15-this.rotation-this.textAngle}get isWhite(){return"white"===this.type}}function c(e){n(0,p=e),i("keyChanged",e.name)}const u=[new l("white","C","C",0,45,15),new l("black","Db","C‚ôØ‚Äâ/‚ÄâD‚ô≠",30),new l("white","D","D",45,60,30),new l("black","Eb","D‚ôØ‚Äâ/‚ÄâE‚ô≠",90),new l("white","E","E",105,45,30),new l("white","F","F",150,45,15),new l("black","Gb","F‚ôØ‚Äâ/‚ÄâG‚ô≠",180),new l("white","G","G",195,60,30),new l("black","Ab","G‚ôØ‚Äâ/‚ÄâA‚ô≠",240),new l("white","A","A",255,60,30),new l("black","Bb","A‚ôØ‚Äâ/‚ÄâB‚ô≠",300),new l("white","B","B",315,45,30)],d=u.filter((e=>!e.isWhite)),f=u.filter((e=>e.isWhite));let p=u[0],h=0;return e.$$set=e=>{"radius"in e&&n(6,r=e.radius)},e.$$.update=()=>{if(3&e.$$.dirty){const e=p.angle-h;n(1,h+=(e%360+540)%360-180)}},[p,h,a,c,d,f,r,e=>c(e)]}class We extends Q{constructor(e){super(),K(this,e,Ue,qe,o,{radius:6})}}function Ze(t){let n;return{c(){n=h("path"),$(n,"d",t[0]),$(n,"class","svelte-fyppmx")},m(e,t){u(e,n,t)},p(e,[t]){1&t&&$(n,"d",e[0])},i:e,o:e,d(e){e&&d(n)}}}function Ve(e,t,n){let{radius:r}=t,{state:i}=t,{animationDuration:o=250}=t,{animationEasing:s=Ae}=t;const a=function(e,t){const r=function(e){const t=2*Math.PI/3,n=Math.cos(t)*e,r=Math.sin(t)*e;return[n,r,e,0,e,0,n,-r]}(e),i=function(e){const t=Math.sin(Math.PI/4)*e;return[-t,t,t,t,t,-t,-t,-t]}(e),o=new Ie("M % % L % % L % % L % % Z",r,i),a=new Se(o,t,(e=>{n(0,l=e)}));return a.ease=s,a}(r,o);let l;return e.$$set=e=>{"radius"in e&&n(1,r=e.radius),"state"in e&&n(2,i=e.state),"animationDuration"in e&&n(3,o=e.animationDuration),"animationEasing"in e&&n(4,s=e.animationEasing)},e.$$.update=()=>{4&e.$$.dirty&&("loading"===i?a.set(0):a.animate("playing"===i?1:0))},[l,r,i,o,s]}class Je extends Q{constructor(e){super(),K(this,e,Ve,Ze,o,{radius:1,state:2,animationDuration:3,animationEasing:4})}}function Ke(e){let t,n;return t=new Je({props:{radius:e[0]/2-1,state:e[1]}}),{c(){W(t.$$.fragment)},m(e,r){Z(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.radius=e[0]/2-1),2&n&&(r.state=e[1]),t.$set(r)},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){q(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function Qe(t){let n;return{c(){n=h("path"),$(n,"d",t[2]),$(n,"class","svelte-14h7w44")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}function Xe(e){let t,n,r,i,o,s,a,f;const p=[Qe,Ke],m=[];function g(e,t){return"loading"===e[1]?0:1}return r=g(e),i=m[r]=p[r](e),{c(){t=h("g"),n=h("circle"),i.c(),$(n,"cx","0"),$(n,"cy","0"),$(n,"r",e[0]),$(n,"fill","white"),$(n,"stroke","black"),$(n,"class","svelte-14h7w44"),$(t,"class",o=l(e[1])+" svelte-14h7w44")},m(i,o){u(i,t,o),c(t,n),m[r].m(t,null),s=!0,a||(f=b(t,"click",e[3]),a=!0)},p(e,[a]){(!s||1&a)&&$(n,"r",e[0]);let c=r;r=g(e),r===c?m[r].p(e,a):(F(),q(m[c],1,1,(()=>{m[c]=null})),R(),i=m[r],i?i.p(e,a):(i=m[r]=p[r](e),i.c()),H(i,1),i.m(t,null)),(!s||2&a&&o!==(o=l(e[1])+" svelte-14h7w44"))&&$(t,"class",o)},i(e){s||(H(i),s=!0)},o(e){q(i),s=!1},d(e){e&&d(t),m[r].d(),a=!1,f()}}}function Ye(e,t,n){let{radius:r}=t,{state:i}=t,o=Le(r,.875*r,180);return e.$$set=e=>{"radius"in e&&n(0,r=e.radius),"state"in e&&n(1,i=e.state)},[r,i,o,function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}(e,t)}]}class et extends Q{constructor(e){super(),K(this,e,Ye,Xe,o,{radius:0,state:1})}}function tt(e){let t,n,r,i,o,s,a;return r=new et({props:{radius:e[4]/6,state:e[3]}}),r.$on("click",e[6]),o=new We({props:{radius:e[4]}}),o.$on("keyChanged",e[9]),s=new Fe({props:{outerRadius:e[5],innerRadius:e[4],modeDefs:e[0]}}),s.$on("modeChanged",e[10]),{c(){t=h("svg"),n=h("g"),W(r.$$.fragment),i=h("g"),W(o.$$.fragment),W(s.$$.fragment),$(i,"transform","rotate(-15)"),$(n,"transform","translate("+nt/2+", "+rt/2+")"),$(t,"viewBox","0 0 "+nt+" "+rt),$(t,"class","svelte-xtj75i")},m(e,l){u(e,t,l),c(t,n),Z(r,n,null),c(n,i),Z(o,i,null),Z(s,i,null),a=!0},p(e,[t]){const n={};8&t&&(n.state=e[3]),r.$set(n);const i={};1&t&&(i.modeDefs=e[0]),s.$set(i)},i(e){a||(H(r.$$.fragment,e),H(o.$$.fragment,e),H(s.$$.fragment,e),a=!0)},o(e){q(r.$$.fragment,e),q(o.$$.fragment,e),q(s.$$.fragment,e),a=!1},d(e){e&&d(t),V(r),V(o),V(s)}}}const nt=256,rt=256;function it(e,t,n){let r,i;a(e,ve,(e=>n(8,r=e))),a(e,xe,(e=>n(11,i=e)));var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};let{modeDefs:s}=t;const l=["G2 Ab2 A2 Bb2 B2 C3 Db3 D3 Eb3 E3 F3 Gb3","G3 Ab3 A3 Bb3 B3 C4 Db4 D4 Eb4 E4 F4 Gb4"].join(" ").split(" "),c=3*Math.min(nt,rt)/8,u=15*Math.min(nt,rt)/32;let d,f="C",p=0,h=!1;var m;m=()=>{},k().$$.on_mount.push(m);return e.$$set=e=>{"modeDefs"in e&&n(0,s=e.modeDefs)},e.$$.update=()=>{384&e.$$.dirty&&n(3,d="loaded"!==r?"loading":h?"playing":"stopped")},[s,f,p,d,c,u,function(){return o(this,void 0,void 0,(function*(){"loaded"===r&&(je(),h||function(){o(this,void 0,void 0,(function*(){const e=60/i/2,t=[...s.slice(p),...s.slice(0,p)],r=t[0].semitones;let o=t.map((({semitones:e})=>(e+12-r)%12));o=[...o,12,...o.reverse()];const a=l.findIndex((e=>e.slice(0,-1)===f)),c=o.map(((t,n)=>({note:l[a+t],delay:0===n?0:e})));n(7,h=!0),yield Pe(c),n(7,h=!1)}))}())}))},h,r,({detail:e})=>n(1,f=e),({detail:e})=>n(2,p=e)]}class ot extends Q{constructor(e){super(),K(this,e,it,tt,o,{modeDefs:0})}}function st(e){return e.map((([e,t])=>({name:t,semitones:e})))}var at={melodic:{major:st([[0,"Ionian"],[2,"Dorian"],[4,"Phrygian"],[5,"Lydian"],[7,"Mixolydian"],[9,"Aeolian"],[11,"Locrian"]]),minor:st([[0,"Melodic minor"],[2,"Dorian ‚ô≠9"],[3,"Lydian aug."],[5,"Lydian ‚ô≠7"],[7,"Mixolydian ‚ô≠13"],[9,"Aeolian ‚ô≠5"],[11,"Altered"]])},harmonic:{major:st([[0,"Harmonic major"],[2,"Dorian ‚ô≠5"],[4,"Altered ‚ôÆ5"],[5,"Lydian minor"],[7,"Mixolydian ‚ô≠9"],[8,"Lydian aug. ‚ôØ9"],[11,"Locrian ùÑ´7"]]),minor:st([[0,"Harmonic minor"],[2,"Locrian ‚ôÆ13"],[3,"Ionian aug."],[5,"Dorian ‚ôØ11"],[7,"Mixolydian ‚ô≠9 ‚ô≠13"],[8,"Lydian ‚ôØ2"],[11,"Altered ‚ô≠‚ô≠7"]])}};function lt(e,t,n){const r=e.slice();return r[2]=t[n].name,r[3]=t[n].defs,r}function ct(t){let n,r,i,o,s,a,l,f,h=t[2]+"";return a=new ot({props:{modeDefs:t[3]}}),{c(){n=p("h2"),r=m(h),i=m(" Modes"),o=g(),s=p("div"),W(a.$$.fragment),l=g(),$(n,"class","svelte-196j46k"),$(s,"class","wheel svelte-196j46k")},m(e,t){u(e,n,t),c(n,r),c(n,i),u(e,o,t),u(e,s,t),Z(a,s,null),c(s,l),f=!0},p:e,i(e){f||(H(a.$$.fragment,e),f=!0)},o(e){q(a.$$.fragment,e),f=!1},d(e){e&&d(n),e&&d(o),e&&d(s),V(a)}}}function ut(e){let t,n,r,i,o,s,a,l,h,b;l=new Ce({});let w=e[1],y=[];for(let t=0;t<w.length;t+=1)y[t]=ct(lt(e,w,t));const x=e=>q(y[e],1,1,(()=>{y[e]=null}));return{c(){t=p("main"),n=p("h1"),r=m(e[0]),i=g(),o=p("div"),s=p("h3"),s.textContent="Playback Options",a=g(),W(l.$$.fragment),h=g();for(let e=0;e<y.length;e+=1)y[e].c();$(n,"class","svelte-196j46k"),$(s,"class","svelte-196j46k"),$(t,"class","svelte-196j46k")},m(e,d){u(e,t,d),c(t,n),c(n,r),c(t,i),c(t,o),c(o,s),c(o,a),Z(l,o,null),c(t,h);for(let e=0;e<y.length;e+=1)y[e].m(t,null);b=!0},p(e,[n]){if((!b||1&n)&&v(r,e[0]),2&n){let r;for(w=e[1],r=0;r<w.length;r+=1){const i=lt(e,w,r);y[r]?(y[r].p(i,n),H(y[r],1)):(y[r]=ct(i),y[r].c(),H(y[r],1),y[r].m(t,null))}for(F(),r=w.length;r<y.length;r+=1)x(r);R()}},i(e){if(!b){H(l.$$.fragment,e);for(let e=0;e<w.length;e+=1)H(y[e]);b=!0}},o(e){q(l.$$.fragment,e),y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)q(y[e]);b=!1},d(e){e&&d(t),V(l),f(y,e)}}}function dt(e,t,n){let{title:r}=t;const i=[{name:"Melodic Major",defs:at.melodic.major},{name:"Melodic Minor",defs:at.melodic.minor},{name:"Harmonic Major",defs:at.harmonic.major},{name:"Harmonic Minor",defs:at.harmonic.minor}];return e.$$set=e=>{"title"in e&&n(0,r=e.title)},[r,i]}class ft extends Q{constructor(e){super(),K(this,e,dt,ut,o,{title:0})}}function pt(t){let n;return{c(){n=p("footer"),n.innerHTML='<p>Made with <span class="red svelte-mr5kkz">‚ô•</span> by\n    <a href="https://www.tobx.de/">Tobx</a></p>',$(n,"class","svelte-mr5kkz")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}class ht extends Q{constructor(e){super(),K(this,e,null,pt,o,{})}}function mt(t){let n;return{c(){n=p("header"),n.innerHTML='<div class="flex-1 svelte-1al10k3"><a href="https://github.com/tobx/music-mode-wheels" class="icon svelte-1al10k3"><svg viewBox="0 0 64 64" fill="currentColor"><path d="M31.997,-0C14.327,-0 0,14.327 0,32.001C0,46.139 9.168,58.132 21.884,62.366C23.485,62.658 24.069,61.67 24.069,60.822C24.069,60.063 24.041,58.05 24.025,55.38C15.124,57.313 13.246,51.09 13.246,51.09C11.791,47.394 9.693,46.41 9.693,46.41C6.787,44.424 9.913,44.463 9.913,44.463C13.125,44.691 14.814,47.762 14.814,47.762C17.668,52.651 22.304,51.239 24.127,50.422C24.418,48.353 25.243,46.943 26.159,46.143C19.053,45.336 11.582,42.589 11.582,30.327C11.582,26.834 12.83,23.978 14.877,21.741C14.547,20.931 13.449,17.678 15.189,13.272C15.189,13.272 17.877,12.411 23.99,16.553C26.542,15.843 29.28,15.488 32.001,15.476C34.718,15.488 37.456,15.843 40.012,16.553C46.121,12.411 48.803,13.272 48.803,13.272C50.549,17.678 49.451,20.931 49.121,21.741C51.172,23.978 52.412,26.834 52.412,30.327C52.412,42.621 44.929,45.326 37.8,46.118C38.949,47.106 39.973,49.058 39.973,52.044C39.973,56.321 39.933,59.772 39.933,60.822C39.933,61.678 40.509,62.674 42.134,62.362C54.84,58.12 64,46.135 64,32.001C64,14.327 49.671,-0 31.997,-0"></path></svg></a></div> \n  <div class="center svelte-1al10k3"><strong class="svelte-1al10k3">No sound?</strong> \n    <span class="svelte-1al10k3">Check if your device is silenced.</span></div> \n  <div class="flex-1 svelte-1al10k3"></div>',$(n,"class","svelte-1al10k3")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}class gt extends Q{constructor(e){super(),K(this,e,null,mt,o,{})}}function bt(t){let n,r,i,o,s,a,l;return r=new gt({}),o=new ft({props:{title:t[0]}}),a=new ht({}),{c(){n=p("div"),W(r.$$.fragment),i=g(),W(o.$$.fragment),s=g(),W(a.$$.fragment),$(n,"class","app svelte-xkr4hx")},m(e,t){u(e,n,t),Z(r,n,null),c(n,i),Z(o,n,null),c(n,s),Z(a,n,null),l=!0},p:e,i(e){l||(H(r.$$.fragment,e),H(o.$$.fragment,e),H(a.$$.fragment,e),l=!0)},o(e){q(r.$$.fragment,e),q(o.$$.fragment,e),q(a.$$.fragment,e),l=!1},d(e){e&&d(n),V(r),V(o),V(a)}}}function $t(e){return[document.title]}return new class extends Q{constructor(e){super(),K(this,e,$t,bt,o,{})}}({target:document.body})}();
